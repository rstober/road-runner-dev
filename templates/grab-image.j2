
- name: register all physical_nodes
  register: all_nodes
  brightcomputing.bcm92.physical_node_info: {}
  
{% for node in ansible_local['custom']['nodes'] %}
{% if node['hostname'] | regex_search('01$') %}
- name: Display node details
  debug:
    msg: 
    - "hostname: {{ node['hostname'] }}"

- name: Display node details
  debug:
    msg:
    - "hostname: {{ item.hostname }}"
    - "category: {{ item.category.name }}"
    - "software image: {{ item.category.softwareImageProxy.parentSoftwareImage.name }}"
  loop: '{{ all_nodes.physical_nodes }}'
  loop_control:
    label: '{{ item.hostname }}'

{% endif %}
{% endfor %}
